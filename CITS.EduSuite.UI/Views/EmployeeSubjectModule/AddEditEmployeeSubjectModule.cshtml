@model CITS.EduSuite.Business.Models.ViewModels.EmployeeSubjectModuleViewModel
@using CITS.EduSuite.UI
@using CITS.EduSuite.Business.Models.ViewModels

<div class="modal-header">
    <button type="button" class="modal-close" data-dismiss="modal" aria-label="Close"><i class="fa fa-close"></i></button>
    <h4 class="modal-title" id="myModalLabel">@EduSuiteUIResources.Add @EduSuiteUIResources.Sla @EduSuiteUIResources.Edit@EduSuiteUIResources.BlankSpace @EduSuiteUIResources.EmployeeSubjectModules</h4>
</div>
@using (Html.BeginForm("AddEditEmployeeSubjectModules", "EmployeeSubjectModule", FormMethod.Post, new { @id = "frmAddEditEmployeeSubjectModule" }))
{

    @*<input type="hidden" id="hdnGetRollNumberList" value="@Url.Action(" getrollnumberlist", "DivisionAllocation" )" />
        <input type="hidden" id="hdnAddEditDivisionAllocationSubmit" value="@Url.Action(" addeditdivisionallocationsubmit", "DivisionAllocation" )" />*@
    @Html.AntiForgeryToken()


    @*@Html.HiddenFor(m => m.SubjectKey)
    @Html.HiddenFor(m => m.ClassDetailsKey)
    @Html.HiddenFor(m => m.SubjectKey)*@
    @Html.HiddenFor(m => m.TemplateKey)
    @Html.HiddenFor(m => m.EmployeesKey)


    @Html.ValidationSummary(true)

    <div class="modal-body">
        <div class="form-master">
            <div class="form-row">
                <div class="paddingNone">
                    <span class="ValidateDataMsg"> @Html.ValidationMessage("error_msg")  </span>
                </div>
            </div>
            <div id="dynamicRepeater" class="repeater">
                <table class="table table-responsive table-stripped">
                    <thead>
                        <tr>
                            <th>
                                @Html.Label(EduSuiteUIResources.Module, htmlAttributes: new { @class = "form-label" })
                            </th>                                                      

                            <th>
                                @Html.Label(EduSuiteUIResources.Status, htmlAttributes: new { @class = "form-label" })
                            </th>
                          

                           
                        </tr>
                    </thead>
                    <tbody data-repeater-list id="DivInternalExamResult">
                        @for (int i = 0; i < Model.EmployeeSubjectDetailsModel.Count(); i++)
                        {
                            <tr data-repeater-item>
                                <td class="px-1">
                                    @Html.DisplayFor(m => m.EmployeeSubjectDetailsModel[i].Modulename, new { @class = "form-control input-control smallFont", @readonly = "true" })
                                    @Html.HiddenFor(m => m.EmployeeSubjectDetailsModel[i].RowKey, new { @class = "rowKeyClass" })
                                    @Html.HiddenFor(m => m.EmployeeSubjectDetailsModel[i].TeacherClassAllocationKey)
                                    @Html.HiddenFor(m => m.EmployeeSubjectDetailsModel[i].ClassDetailsKey)
                                    @Html.HiddenFor(m => m.EmployeeSubjectDetailsModel[i].SubjectKey)
                                    @Html.HiddenFor(m => m.EmployeeSubjectDetailsModel[i].ModuleKey)
                                    @Html.HiddenFor(m => m.EmployeeSubjectDetailsModel[i].EmployeeKey)

                                   
                                </td>
                       


                                <td class="px-1">
                                    <div class="switch-check switch">
                                        @Html.CheckBoxFor(m => m.EmployeeSubjectDetailsModel[i].IsActive, new { @class = "switch-input" })
                                        <div class="switch-label redgreen" data-on="@EduSuiteUIResources.Yes" data-off="@EduSuiteUIResources.No"></div>
                                        <div class="switch-handle"></div>
                                    </div>
                                </td>

                               
                            </tr>
                        }

                    </tbody>
                </table>
            </div>


        </div>
    </div>

    <div class="modal-footer justify-content-start">
                <div class="form-group">
            <input type="submit" value="@EduSuiteUIResources.Save" id="btnSave" class="btn btn-sm btn-success mx-1" />
            <button type="button" data-dismiss="modal" class="btn btn-sm btn-danger mx-1">@EduSuiteUIResources.Cancel</button>

        </div>
    </div>
}
<script>
    $(document).ready(function () {
        AppCommon.FormatInputCase()
        var jsonData=@(Html.Raw(Json.Encode(Model)));
        //SetExamResultStatus();
        //$("input[id*=Mark]",$("#DivInternalExamResult")).on('input',function()
        //{
        //    SetExamResultStatus();
        //});

        //$("input[id*=Mark]",$("#DivInternalExamResult")).on('keydown',function(e)
        //{
        //    if(e.keycode=='13')
        //    {
        //        var tr = $(this).closest(tr).next();
        //        $("input[id*=Mark]",$(tr)).focus();
        //    }
        //    if(e.keycode=='38')
        //    {
        //        var tr = $(this).closest(tr).prev();
        //        $("input[id*=Mark]",$(tr)).focus();
        //    }

        //});

        //$("input[id*=AbsentStatus]",$("#DivInternalExamResult")).change(function()
        //{
        //    SetExamResultStatus();
        //});

    });
</script>
<script>

</script>







