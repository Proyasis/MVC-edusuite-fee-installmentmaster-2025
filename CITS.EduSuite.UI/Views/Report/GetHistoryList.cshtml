
@using System.Web.Mvc
@model CITS.EduSuite.Business.Models.ViewModels.EnquiryScheduleViewModel
@using CITS.EduSuite.Business.Models.ViewModels
<style>
        .attrName {
            font-weight: bold;
        }

        .spamedRecord {
            background: #f5f397;
            margin-left: 7px;
            padding: 0px 5px;
            color: #d20404;
        }

        span.spamedRecord {
            background: #f5f397;
            margin-left: 7px;
            padding: 0px 2px;
            color: #d20404;
            display: block;
            text-align: center;
            width: 31%;
            margin-bottom: 5px;
            font-style: italic;
            font-size: 14px;
        }

        .serviceTypeName {
            background: #f3f3f3;
            padding: 9px 11px;
        }

        .tempRow tr:last-child {
            background: #f4d4f5 !important;
        }
        /*.tempRow tr:first-child {
        background: #f7e8e8 !important;
    }*/
</style>



@for (var i = 0; i < Model.MobileNumberSearch.Count; i++)
{



    <div class="serviceTypeName">
        <span class="TempRowitem">
            Name: @Model.MobileNumberSearch[i].Name
        </span>
        <span class="TempRowitem d-none">
            ServiceType:  @Model.MobileNumberSearch[i].AcademicTermName
        </span>

        @if (@Model.MobileNumberSearch[i].ApplicationStatusName != null)
        {
            <span class="TempRowitem">
                Application Status:

                @if (Model.MobileNumberSearch[i].ApplicationStatusKey == DbConstants.ApplicationStatus.Droped)
                {
                    <span class="label label-danger">@Model.MobileNumberSearch[i].ApplicationStatusName </span>
                }
                else if (Model.MobileNumberSearch[i].ApplicationStatusKey == DbConstants.ApplicationStatus.Completed)
                {
                    <span class="label label-success">@Model.MobileNumberSearch[i].ApplicationStatusName </span>
                }
                else if (Model.MobileNumberSearch[i].ApplicationStatusKey == DbConstants.ApplicationStatus.OnGoing)
                {
                    <span class="label label-warning">@Model.MobileNumberSearch[i].ApplicationStatusName </span>
                }


            </span>
        }


        @if (@Model.MobileNumberSearch[i].InTakeName != null)
        {
            <span class="TempRowitem">
                InTake: @Model.MobileNumberSearch[i].InTakeName
            </span>
        }


        <span class="TempRowitem">
            Mobile Number: @Model.MobileNumberSearch[i].MobileNumber
        </span>


        @if (@Model.MobileNumberSearch[i].LocationName != null)
        {
            <span class="TempRowitem">
                Location:  @Model.MobileNumberSearch[i].LocationName

            </span>
        }


        <span style="float: right; border: 0px; margin-right: 17%;" class="TempRowitem d-none">
            <span><i style=" color: #e6a1e8;font-size:14px" class="fa fa-square" aria-hidden="true"></i> Last Schedule</span>
        </span>

        @*<span style="float: right; border: 0px; margin-right: 0%;" class="TempRowitem">
                <span><i style=" color: #f1d5d5;font-size:14px" class="fa fa-square" aria-hidden="true"></i> First Schedule</span>
            </span>*@
    </div>

    <table class="table table-bordered table-responsive table-sm">
        <thead>
            <tr>

                @*<th>@EduSuiteUIResources.Name</th>
                    <th>@EduSuiteUIResources.Phone</th>
                    <th>@EduSuiteUIResources.Location</th>*@
                <th>@EduSuiteUIResources.CallStatus</th>
                <th>@EduSuiteUIResources.Feedback</th>
                @*<th>@EduSuiteUIResources.ServiceType</th>*@
                <th>@EduSuiteUIResources.CallDuration</th>
                <th>@EduSuiteUIResources.Date</th>
                <th>@EduSuiteUIResources.NextCallSchedule</th>
                <th>@EduSuiteUIResources.Branch</th>
                <th>@EduSuiteUIResources.Schedule @EduSuiteUIResources.Type</th>
                <th>@EduSuiteUIResources.PostedBy</th>
            </tr>
        </thead>


        @{
            String ScheduleColor = "";
            foreach (var History in Model.MobileNumberSearch[i].EnquirySchedule)
            {

                if (History.ScheduleTypeKey == DbConstants.ScheduleTypes.NewLead)
                {
                    ScheduleColor = "#b90b92";
                }
                else if (History.ScheduleTypeKey == DbConstants.ScheduleTypes.EnquiryLead)
                {
                    ScheduleColor = "#0c10c7";
                }
                else if (History.ScheduleTypeKey == DbConstants.ScheduleTypes.Enquiry)
                {
                    ScheduleColor = "#07b907";
                }
                else if (History.ScheduleTypeKey == DbConstants.ScheduleTypes.Document)
                {
                    ScheduleColor = "#b90b92";
                }

                if (History.FeedbackCreatedDate != DateTime.MinValue)
                {
                    <tr>
                        @*<td>@Model[i].Name </td>
                            <td>@Model[i].MobileNumber </td>
                            <td>@Model[i].LocationName </td>*@
                        <td>@History.CallStatusName </td>
                        <td width="200px">@History.Feedback </td>
                        @*<td>@Model[i].ServiceTypeName </td>*@
                        <td>@History.CallDuration </td>
                        <td>
                            @if (History.FeedbackCreatedDate != DateTime.MinValue)
                            {
                                @(string.Format("{0:dd/MM/yyyy hh:mm:ss tt }", History.FeedbackCreatedDate))
                            }
                        </td>
                        <td>@(string.Format("{0:dd/MM/yyyy}", History.NextCallScheduleDate))</td>
                        <td>@History.BranchName </td>
                        <td style="color:@ScheduleColor">@History.ScheduleTypeName </td>
                        <td>@History.CreatedBy </td>
                    </tr>
                }
            }
        }
    </table>



}


